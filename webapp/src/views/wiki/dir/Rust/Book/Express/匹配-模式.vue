<template>
  <div  id="pattern">
      <main>
        <div id="container">
          <wikiside id="wikiside"></wikiside>
          <div id="center">
              <div class="content">
<h2 id="%E5%8C%B9%E9%85%8D">åŒ¹é…</h2>
<p>ä¸€ä¸ªç®€å•çš„[<code>if</code>](If <a href="http://xn--If-8j6c183s.md">Ifè¯­å¥.md</a>)/<code>else</code>å¾€å¾€æ˜¯ä¸å¤Ÿçš„ï¼Œå› ä¸ºä½ å¯èƒ½æœ‰ä¸¤ä¸ªæˆ–æ›´å¤šä¸ªé€‰é¡¹ã€‚è¿™æ ·<code>else</code>ä¹Ÿä¼šå˜å¾—å¼‚å¸¸å¤æ‚ã€‚Rust æœ‰ä¸€ä¸ª<code>match</code>å…³é”®å­—ï¼Œå®ƒå¯ä»¥è®©ä½ æœ‰æ•ˆçš„å–ä»£å¤æ‚çš„<code>if</code>/<code>else</code>ç»„ã€‚çœ‹çœ‹ä¸‹é¢çš„ä»£ç ï¼š</p>
<pre class="hljs"><code><div><span class="hljs-keyword">let</span> x = <span class="hljs-number">5</span>;

<span class="hljs-keyword">match</span> x {
    <span class="hljs-number">1</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"one"</span>),
    <span class="hljs-number">2</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"two"</span>),
    <span class="hljs-number">3</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"three"</span>),
    <span class="hljs-number">4</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"four"</span>),
    <span class="hljs-number">5</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"five"</span>),
    _ =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"something else"</span>),
}
</div></code></pre>
<p><code>match</code>ä½¿ç”¨ä¸€ä¸ªè¡¨è¾¾å¼ç„¶ååŸºäºå®ƒçš„å€¼åˆ†æ”¯ã€‚æ¯ä¸ªåˆ†æ”¯éƒ½æ˜¯<code>val =&gt; expression</code>è¿™ç§å½¢å¼ã€‚å½“åŒ¹é…åˆ°ä¸€ä¸ªåˆ†æ”¯ï¼Œå®ƒçš„è¡¨è¾¾å¼å°†è¢«æ‰§è¡Œã€‚<code>match</code>å±äºâ€œæ¨¡å¼åŒ¹é…â€çš„èŒƒç•´ï¼Œ<code>match</code>æ˜¯å®ƒçš„ä¸€ä¸ªå®ç°ã€‚æœ‰[ä¸€ä¸ªæ•´ä¸ªå…³äºæ¨¡å¼çš„éƒ¨åˆ†](Patterns <a href="http://xn--w0t69v.md">æ¨¡å¼.md</a>)è®²åˆ°äº†æ‰€æœ‰å¯èƒ½çš„æ¨¡å¼ã€‚</p>
<p>match ä¸­ï¼Œè‹¥ å›å‚³ç©ºå€¼ï¼Œä¸èƒ½ç›´æ¥å›å‚³ None è€Œè¦å›å‚³ç©ºå­—ä¸²ï¼Œé€™æ˜¯å› ç‚º Rust è¦æ±‚å›å‚³çš„å‹åˆ¥éœ€ä¸€è‡´ã€‚è‹¥å¾ˆç¢ºå®šè©²éµ/å€¼å°çš„ç¢ºå­˜åœ¨ï¼Œå¯åƒè€ƒä»¥ä¸‹æ–¹å¼å–å€¼ï¼š</p>
<pre class="hljs"><code><div><span class="hljs-keyword">use</span> std::collections::HashMap;
 
<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> hash = HashMap::new();
 
    hash.insert(<span class="hljs-string">"one"</span>, <span class="hljs-string">"eins"</span>);
    hash.insert(<span class="hljs-string">"two"</span>, <span class="hljs-string">"zwei"</span>);
    hash.insert(<span class="hljs-string">"three"</span>, <span class="hljs-string">"drei"</span>);
 
    <span class="hljs-keyword">let</span> data = *(hash.get(<span class="hljs-string">"one"</span>).unwrap());
    <span class="hljs-built_in">assert_eq!</span>(data, <span class="hljs-string">"eins"</span>);
}

</div></code></pre>
<p>é‚£ä¹ˆè¿™æœ‰ä»€ä¹ˆå·¨å¤§çš„ä¼˜åŠ¿å‘¢ï¼Ÿè¿™ç¡®å®æœ‰ä¼˜åŠ¿ã€‚ç¬¬ä¸€ï¼Œ<code>match</code>å¼ºåˆ¶<em>ç©·å°½æ€§æ£€æŸ¥</em>ï¼ˆ<em>exhaustiveness checking</em>ï¼‰ã€‚ä½ çœ‹åˆ°äº†æœ€åé‚£ä¸ªä¸‹åˆ’çº¿å¼€å¤´çš„åˆ†æ”¯äº†å—ï¼Ÿå¦‚æœå»æ‰å®ƒï¼ŒRust å°†ä¼šç»™æˆ‘ä»¬ä¸€ä¸ªé”™è¯¯ï¼š</p>
<pre><code class="language-text">error: non-exhaustive patterns: `_` not covered
</code></pre>
<p>Rust è¯•å›¾å‘Šè¯‰æˆ‘ä»¬å¿˜è®°äº†ä¸€ä¸ªå€¼ã€‚ç¼–è¯‘å™¨ä»<code>x</code>æ¨æ–­å®ƒå¯ä»¥æ˜¯ä»»ä½•æ­£çš„ 32 ä½æ•´å‹å€¼ï¼›ä¾‹å¦‚ä» 1 åˆ° 2,147,483,647ã€‚<code>_</code>å°±åƒä¸€ä¸ª<em>åŒ¹é…æ‰€æœ‰</em>çš„åˆ†æ”¯ï¼Œå®ƒä¼šæ•è·æ‰€æœ‰æ²¡æœ‰è¢«<code>match</code>åˆ†æ”¯æ•è·çš„æ‰€æœ‰å¯èƒ½å€¼ã€‚å¦‚ä½ æ‰€è§ï¼Œåœ¨ä¸Šä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æä¾›äº† 1 åˆ° 5 çš„<code>mtach</code>åˆ†æ”¯ï¼Œå¦‚æœ<code>x</code>æ˜¯ 6 æˆ–è€…å…¶ä»–å€¼ï¼Œé‚£ä¹ˆå®ƒä¼šè¢«<code>_</code>æ•è·ã€‚</p>
<p><code>match</code>ä¹Ÿæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒå¯ä»¥ç”¨åœ¨<code>let</code>ç»‘å®šçš„å³ä¾§æˆ–è€…å…¶å®ƒç›´æ¥ç”¨åˆ°è¡¨è¾¾å¼çš„åœ°æ–¹ï¼š</p>
<pre class="hljs"><code><div><span class="hljs-keyword">let</span> x = <span class="hljs-number">5</span>;

<span class="hljs-keyword">let</span> number = <span class="hljs-keyword">match</span> x {
    <span class="hljs-number">1</span> =&gt; <span class="hljs-string">"one"</span>,
    <span class="hljs-number">2</span> =&gt; <span class="hljs-string">"two"</span>,
    <span class="hljs-number">3</span> =&gt; <span class="hljs-string">"three"</span>,
    <span class="hljs-number">4</span> =&gt; <span class="hljs-string">"four"</span>,
    <span class="hljs-number">5</span> =&gt; <span class="hljs-string">"five"</span>,
    _ =&gt; <span class="hljs-string">"something else"</span>,
};
</div></code></pre>
<p>æœ‰æ—¶ï¼Œè¿™æ˜¯ä¸€ä¸ªæŠŠä¸€ç§ç±»å‹çš„æ•°æ®è½¬æ¢ä¸ºå¦ä¸€ä¸ªç±»å‹çš„å¥½æ–¹æ³•ã€‚</p>
<h2 id="%E5%8C%B9%E9%85%8D%E6%9E%9A%E4%B8%BE%EF%BC%88matching-on-enums%EF%BC%89">åŒ¹é…æšä¸¾ï¼ˆMatching on enumsï¼‰</h2>
<p><code>match</code>çš„å¦ä¸€ä¸ªé‡è¦çš„ä½œç”¨æ˜¯å¤„ç†æšä¸¾çš„å¯èƒ½å˜é‡ï¼š</p>
<pre class="hljs"><code><div><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">Message</span></span> {
    Quit,
    ChangeColor(<span class="hljs-built_in">i32</span>, <span class="hljs-built_in">i32</span>, <span class="hljs-built_in">i32</span>),
    Move { x: <span class="hljs-built_in">i32</span>, y: <span class="hljs-built_in">i32</span> },
    Write(<span class="hljs-built_in">String</span>),
}

<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">quit</span></span>() { <span class="hljs-comment">/* ... */</span> }
<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">change_color</span></span>(r: <span class="hljs-built_in">i32</span>, g: <span class="hljs-built_in">i32</span>, b: <span class="hljs-built_in">i32</span>) { <span class="hljs-comment">/* ... */</span> }
<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">move_cursor</span></span>(x: <span class="hljs-built_in">i32</span>, y: <span class="hljs-built_in">i32</span>) { <span class="hljs-comment">/* ... */</span> }

<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">process_message</span></span>(msg: Message) {
    <span class="hljs-keyword">match</span> msg {
        Message::Quit =&gt; quit(),
        Message::ChangeColor(r, g, b) =&gt; change_color(r, g, b),
        Message::Move { x: x, y: y } =&gt; move_cursor(x, y),
        Message::Write(s) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, s),
    };
}
</div></code></pre>
<p>å†ä¸€æ¬¡ï¼ŒRustç¼–è¯‘å™¨æ£€æŸ¥ç©·å°½æ€§ï¼Œæ‰€ä»¥å®ƒè¦æ±‚å¯¹æ¯ä¸€ä¸ªæšä¸¾çš„å˜é‡éƒ½æœ‰ä¸€ä¸ªåŒ¹é…åˆ†æ”¯ã€‚å¦‚æœä½ å¿½ç•¥äº†ä¸€ä¸ªï¼Œé™¤éä½ ç”¨<code>_</code>å¦åˆ™å®ƒä¼šç»™ä½ ä¸€ä¸ªç¼–è¯‘æ—¶é”™è¯¯ã€‚</p>
<p>ä¸ä¹‹å‰çš„<code>match</code>çš„ä½œç”¨ä¸åŒï¼Œä½ ä¸èƒ½ç”¨å¸¸è§„çš„<code>if</code>è¯­å¥æ¥åšè¿™äº›ã€‚ä½ å¯ä»¥ä½¿ç”¨[if let](if <a href="http://let.md">let.md</a>)è¯­å¥ï¼Œå®ƒå¯ä»¥è¢«çœ‹ä½œæ˜¯ä¸€ä¸ª<code>match</code>çš„ç®€ç•¥å½¢å¼ã€‚</p>
<h1 id="%E6%A8%A1%E5%BC%8F">æ¨¡å¼</h1>
<p>æ¨¡å¼åœ¨Rustä¸­ååˆ†å¸¸è§ã€‚æˆ‘ä»¬åœ¨[å˜é‡ç»‘å®š](Variable Bindings <a href="http://xn--vor83py25aw4p.md">å˜é‡ç»‘å®š.md</a>)ï¼Œ[åŒ¹é…è¯­å¥](Match <a href="http://xn--ckrq85l.md">åŒ¹é….md</a>)å’Œå…¶å®ƒä¸€äº›åœ°æ–¹ä½¿ç”¨å®ƒä»¬ã€‚è®©æˆ‘ä»¬å¼€å§‹ä¸€ä¸ªå¿«é€Ÿçš„å…³äºæ¨¡å¼å¯ä»¥å¹²ä»€ä¹ˆçš„æ•™ç¨‹ï¼</p>
<p>å¿«é€Ÿå›é¡¾ï¼šä½ å¯ä»¥ç›´æ¥åŒ¹é…å¸¸é‡ï¼Œå¹¶ä¸”<code>_</code>ä½œä¸ºâ€œä»»ä½•â€ç±»å‹ï¼š</p>
<pre class="hljs"><code><div><span class="hljs-keyword">let</span> x = <span class="hljs-number">1</span>;

<span class="hljs-keyword">match</span> x {
    <span class="hljs-number">1</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"one"</span>),
    <span class="hljs-number">2</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"two"</span>),
    <span class="hljs-number">3</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"three"</span>),
    _ =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"anything"</span>),
}
</div></code></pre>
<p>è¿™ä¼šæ‰“å°å‡º<code>one</code>ã€‚</p>
<p>æœ‰ä¸€ä¸ªæ¨¡å¼çš„é™·é˜±ï¼šå°±åƒä»»ä½•å¼•å…¥ä¸€ä¸ªæ–°ç»‘å®šçš„è¯­å¥ï¼Œä»–ä»¬ä¼šå¼•å…¥éšè—ã€‚ä¾‹å¦‚ï¼š</p>
<pre class="hljs"><code><div><span class="hljs-keyword">let</span> x = <span class="hljs-number">1</span>;
<span class="hljs-keyword">let</span> c = <span class="hljs-string">'c'</span>;

<span class="hljs-keyword">match</span> c {
    x =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"x: {} c: {}"</span>, x, c),
}

<span class="hljs-built_in">println!</span>(<span class="hljs-string">"x: {}"</span>, x)
</div></code></pre>
<p>è¿™ä¼šæ‰“å°ï¼š</p>
<pre><code class="language-text">x: c c: c
x: 1
</code></pre>
<p>æ¢å¥è¯è¯´ï¼Œ<code>x =&gt;</code>åŒ¹é…åˆ°äº†æ¨¡å¼å¹¶å¼•å…¥äº†ä¸€ä¸ªå«åš<code>x</code>çš„æ–°ç»‘å®šã€‚è¿™ä¸ªæ–°ç»‘å®šçš„ä½œç”¨åŸŸæ˜¯åŒ¹é…åˆ†æ”¯å¹¶æ‹¥æœ‰<code>c</code>çš„å€¼ã€‚æ³¨æ„åŒ¹é…ä½œç”¨åŸŸå¤–çš„<code>x</code>çš„å€¼å¯¹å†…éƒ¨çš„<code>x</code>çš„å€¼å¹¶æ— å½±å“ã€‚å› ä¸ºæˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ª<code>x</code>ï¼Œæ–°çš„<code>x</code>éšè—äº†å®ƒã€‚</p>
<h2 id="%E5%A4%9A%E9%87%8D%E6%A8%A1%E5%BC%8F%EF%BC%88multiple-patterns%EF%BC%89">å¤šé‡æ¨¡å¼ï¼ˆMultiple patternsï¼‰</h2>
<p>ä½ å¯ä»¥ä½¿ç”¨<code>|</code>åŒ¹é…å¤šä¸ªæ¨¡å¼ï¼š</p>
<pre class="hljs"><code><div><span class="hljs-keyword">let</span> x = <span class="hljs-number">1</span>;

<span class="hljs-keyword">match</span> x {
    <span class="hljs-number">1</span> | <span class="hljs-number">2</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"one or two"</span>),
    <span class="hljs-number">3</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"three"</span>),
    _ =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"anything"</span>),
}
</div></code></pre>
<p>è¿™ä¼šè¾“å‡º<code>one or two</code>ã€‚</p>
<h2 id="%E8%A7%A3%E6%9E%84%EF%BC%88destructuring%EF%BC%89">è§£æ„ï¼ˆDestructuringï¼‰</h2>
<p>å¦‚æœä½ æœ‰ä¸€ä¸ªå¤åˆæ•°æ®ç±»å‹ï¼Œä¾‹å¦‚ä¸€ä¸ª[ç»“æ„ä½“](Structs <a href="http://xn--tqqq30dppq.md">ç»“æ„ä½“.md</a>)ï¼Œä½ å¯ä»¥åœ¨æ¨¡å¼ä¸­è§£æ„å®ƒï¼š</p>
<pre class="hljs"><code><div><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Point</span></span> {
    x: <span class="hljs-built_in">i32</span>,
    y: <span class="hljs-built_in">i32</span>,
}

<span class="hljs-keyword">let</span> origin = Point { x: <span class="hljs-number">0</span>, y: <span class="hljs-number">0</span> };

<span class="hljs-keyword">match</span> origin {
    Point { x, y } =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"({},{})"</span>, x, y),
}
</div></code></pre>
<p>æˆ‘ä»¬å¯ä»¥ç”¨<code>:</code>æ¥ç»™å‡ºä¸€ä¸ªä¸åŒçš„åå­—ï¼š</p>
<pre class="hljs"><code><div><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Point</span></span> {
    x: <span class="hljs-built_in">i32</span>,
    y: <span class="hljs-built_in">i32</span>,
}

<span class="hljs-keyword">let</span> origin = Point { x: <span class="hljs-number">0</span>, y: <span class="hljs-number">0</span> };

<span class="hljs-keyword">match</span> origin {
    Point { x: x1, y: y1 } =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"({},{})"</span>, x1, y1),
}
</div></code></pre>
<p>å¦‚æœä½ åªå…³å¿ƒéƒ¨åˆ†å€¼ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç»™å®ƒä»¬éƒ½å‘½åï¼š</p>
<pre class="hljs"><code><div><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Point</span></span> {
    x: <span class="hljs-built_in">i32</span>,
    y: <span class="hljs-built_in">i32</span>,
}

<span class="hljs-keyword">let</span> origin = Point { x: <span class="hljs-number">0</span>, y: <span class="hljs-number">0</span> };

<span class="hljs-keyword">match</span> origin {
    Point { x, .. } =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"x is {}"</span>, x),
}
</div></code></pre>
<p>è¿™ä¼šè¾“å‡º<code>x is 0</code>ã€‚</p>
<p>ä½ å¯ä»¥å¯¹ä»»ä½•æˆå‘˜è¿›è¡Œè¿™æ ·çš„åŒ¹é…ï¼Œä¸ä»…ä»…æ˜¯ç¬¬ä¸€ä¸ªï¼š</p>
<pre class="hljs"><code><div><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Point</span></span> {
    x: <span class="hljs-built_in">i32</span>,
    y: <span class="hljs-built_in">i32</span>,
}

<span class="hljs-keyword">let</span> origin = Point { x: <span class="hljs-number">0</span>, y: <span class="hljs-number">0</span> };

<span class="hljs-keyword">match</span> origin {
    Point { y, .. } =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"y is {}"</span>, y),
}
</div></code></pre>
<p>è¿™ä¼šè¾“å‡º<code>y is 0</code>ã€‚</p>
<p>è¿™ç§â€œè§£æ„â€è¡Œä¸ºå¯ä»¥ç”¨åœ¨ä»»ä½•å¤åˆæ•°æ®ç±»å‹ä¸Šï¼Œä¾‹å¦‚[å…ƒç»„](Primitive Types <a href="http://xn--8mr24g9v7alrg.md#%E5%85%83%E7%BB%84%EF%BC%88tuples%EF%BC%89">åŸç”Ÿç±»å‹.md#å…ƒç»„ï¼ˆtuplesï¼‰</a>)å’Œ[æšä¸¾](Enums <a href="http://xn--wiq013d.md">æšä¸¾.md</a>)</p>
<h2 id="%E5%BF%BD%E7%95%A5%E7%BB%91%E5%AE%9A%EF%BC%88ignoring-bindings%EF%BC%89">å¿½ç•¥ç»‘å®šï¼ˆIgnoring bindingsï¼‰</h2>
<p>ä½ å¯ä»¥åœ¨æ¨¡å¼ä¸­ä½¿ç”¨<code>_</code>æ¥å¿½è§†å®ƒçš„ç±»å‹å’Œå€¼ã€‚ä¾‹å¦‚ï¼Œè¿™æ˜¯ä¸€ä¸ª<code>Result&lt;T, E&gt;</code>çš„<code>match</code>ï¼š</p>
<pre class="hljs"><code><div># <span class="hljs-keyword">let</span> some_value: <span class="hljs-built_in">Result</span>&lt;<span class="hljs-built_in">i32</span>, &amp;<span class="hljs-symbol">'static</span> <span class="hljs-built_in">str</span>&gt; = <span class="hljs-literal">Err</span>(<span class="hljs-string">"There was an error"</span>);
<span class="hljs-keyword">match</span> some_value {
    <span class="hljs-literal">Ok</span>(value) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"got a value: {}"</span>, value),
    <span class="hljs-literal">Err</span>(_) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"an error occurred"</span>),
}
</div></code></pre>
<p>åœ¨ç¬¬ä¸€ä¸ªåˆ†æ”¯ï¼Œæˆ‘ä»¬ç»‘å®šäº†<code>Ok</code>å˜é‡ä¸­çš„å€¼ä¸º<code>value</code>ï¼Œä¸è¿‡åœ¨<code>Err</code>åˆ†æ”¯ï¼Œæˆ‘ä»¬ç”¨<code>_</code>æ¥å¿½è§†ç‰¹å®šçš„é”™è¯¯ï¼Œè€Œåªæ˜¯æ‰“å°äº†ä¸€ä¸ªé€šç”¨çš„é”™è¯¯ä¿¡æ¯ã€‚</p>
<p><code>_</code>åœ¨ä»»ä½•åˆ›å»ºç»‘å®šçš„æ¨¡å¼ä¸­éƒ½æœ‰æ•ˆã€‚è¿™åœ¨å¿½ç•¥ä¸€ä¸ªå¤§å¤§ç»“æ„ä½“çš„éƒ¨åˆ†å­—æ®µæ—¶å¾ˆæœ‰ç”¨ï¼š</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">coordinate</span></span>() -&gt; (<span class="hljs-built_in">i32</span>, <span class="hljs-built_in">i32</span>, <span class="hljs-built_in">i32</span>) {
    <span class="hljs-comment">// generate and return some sort of triple tuple</span>
# (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
}

<span class="hljs-keyword">let</span> (x, _, z) = coordinate();
</div></code></pre>
<p>è¿™é‡Œï¼Œæˆ‘ä»¬ç»‘å®šå…ƒç»„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ ä¸º<code>x</code>å’Œ<code>z</code>ï¼Œä¸è¿‡çœç•¥äº†ä¸­é—´çš„å…ƒç´ ã€‚</p>
<p>ç›¸ä¼¼çš„ï¼Œä½ å¯ä»¥åœ¨æ¨¡å¼ä¸­ç”¨<code>..</code>æ¥å¿½ç•¥å¤šä¸ªå€¼ã€‚</p>
<pre class="hljs"><code><div><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">OptionalTuple</span></span> {
    Value(<span class="hljs-built_in">i32</span>, <span class="hljs-built_in">i32</span>, <span class="hljs-built_in">i32</span>),
    Missing,
}

<span class="hljs-keyword">let</span> x = OptionalTuple::Value(<span class="hljs-number">5</span>, -<span class="hljs-number">2</span>, <span class="hljs-number">3</span>);

<span class="hljs-keyword">match</span> x {
    OptionalTuple::Value(..) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Got a tuple!"</span>),
    OptionalTuple::Missing =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"No such luck."</span>),
}
</div></code></pre>
<p>è¿™ä¼šæ‰“å°<code>Got a tuple!</code>ã€‚</p>
<h2 id="ref%E5%92%8Cref-mut"><code>ref</code>å’Œ<code>ref mut</code></h2>
<p>æ¨¡å¼åŒ¹é…å‘½ä¸­çš„æ—¶å€™ï¼Œæœªå®ç°<code>Copy</code>çš„ç±»å‹ä¼šè¢«é»˜è®¤çš„moveæ‰ï¼Œå› æ­¤ï¼ŒåŸownerå°±ä¸å†æŒæœ‰å…¶æ‰€æœ‰æƒã€‚ä½†æ˜¯æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬åªæƒ³è¦ä»ä¸­æ‹¿åˆ°ä¸€ä¸ªå˜é‡çš„ï¼ˆå¯å˜ï¼‰å¼•ç”¨ï¼Œè€Œä¸æƒ³å°†å…¶moveå‡ºä½œç”¨åŸŸï¼Œç”¨<code>ref</code>æˆ–è€…<code>ref mut</code>ã€‚</p>
<pre class="hljs"><code><div><span class="hljs-keyword">let</span> x = <span class="hljs-number">5</span>;

<span class="hljs-keyword">match</span> x {
    <span class="hljs-keyword">ref</span> r =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Got a reference to {}"</span>, r),
}
</div></code></pre>
<p>è¿™ä¼šè¾“å‡º<code>Got a reference to 5</code>ã€‚</p>
<p>è¿™é‡Œï¼Œ<code>match</code>ä¸­çš„<code>r</code>æ˜¯<code>&amp;i32</code>ç±»å‹çš„ã€‚æ¢å¥è¯è¯´ï¼Œ<code>ref</code>å…³é”®å­—åˆ›å»ºäº†ä¸€ä¸ªåœ¨æ¨¡å¼ä¸­ä½¿ç”¨çš„å¼•ç”¨ã€‚å¦‚æœä½ éœ€è¦ä¸€ä¸ªå¯å˜å¼•ç”¨ï¼Œ<code>ref mut</code>åŒæ ·å¯ä»¥åšåˆ°ï¼š</p>
<pre class="hljs"><code><div><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> x = <span class="hljs-number">5</span>;

<span class="hljs-keyword">match</span> x {
    <span class="hljs-keyword">ref</span> <span class="hljs-keyword">mut</span> mr =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Got a mutable reference to {}"</span>, mr),
}
</div></code></pre>
<h2 id="%E8%8C%83%E5%9B%B4%EF%BC%88ranges%EF%BC%89">èŒƒå›´ï¼ˆRangesï¼‰</h2>
<p>ä½ å¯ä»¥ç”¨<code>...</code>åŒ¹é…ä¸€ä¸ªèŒƒå›´çš„å€¼ï¼š</p>
<pre class="hljs"><code><div><span class="hljs-keyword">let</span> x = <span class="hljs-number">1</span>;

<span class="hljs-keyword">match</span> x {
    <span class="hljs-number">1</span> ... <span class="hljs-number">5</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"one through five"</span>),
    _ =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"anything"</span>),
}
</div></code></pre>
<p>è¿™ä¼šè¾“å‡º<code>one through five</code>ã€‚</p>
<p>èŒƒå›´ç»å¸¸ç”¨åœ¨æ•´æ•°å’Œ<code>char</code>ä¸Šã€‚</p>
<pre class="hljs"><code><div><span class="hljs-keyword">let</span> x = 'ğŸ’…';

<span class="hljs-keyword">match</span> x {
    <span class="hljs-string">'a'</span> ... <span class="hljs-string">'j'</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"early letter"</span>),
    <span class="hljs-string">'k'</span> ... <span class="hljs-string">'z'</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"late letter"</span>),
    _ =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"something else"</span>),
}
</div></code></pre>
<p>è¿™ä¼šè¾“å‡º<code>something else</code>ã€‚</p>
<h2 id="%E7%BB%91%E5%AE%9A">ç»‘å®š</h2>
<p>ä½ å¯ä»¥ä½¿ç”¨<code>@</code>æŠŠå€¼ç»‘å®šåˆ°åå­—ä¸Šï¼š</p>
<pre class="hljs"><code><div><span class="hljs-keyword">let</span> x = <span class="hljs-number">1</span>;

<span class="hljs-keyword">match</span> x {
    e @ <span class="hljs-number">1</span> ... <span class="hljs-number">5</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"got a range element {}"</span>, e),
    _ =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"anything"</span>),
}
</div></code></pre>
<p>è¿™ä¼šè¾“å‡º<code>got a range element 1</code>ã€‚åœ¨ä½ æƒ³å¯¹ä¸€ä¸ªå¤æ‚æ•°æ®ç»“æ„è¿›è¡Œéƒ¨åˆ†åŒ¹é…çš„æ—¶å€™ï¼Œè¿™ä¸ªç‰¹æ€§ååˆ†æœ‰ç”¨ï¼š</p>
<pre class="hljs"><code><div><span class="hljs-meta">#[derive(Debug)]</span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Person</span></span> {
    name: <span class="hljs-built_in">Option</span>&lt;<span class="hljs-built_in">String</span>&gt;,
}

<span class="hljs-keyword">let</span> name = <span class="hljs-string">"Steve"</span>.to_string();
<span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> x: <span class="hljs-built_in">Option</span>&lt;Person&gt; = <span class="hljs-literal">Some</span>(Person { name: <span class="hljs-literal">Some</span>(name) });
<span class="hljs-keyword">match</span> x {
    <span class="hljs-literal">Some</span>(Person { name: <span class="hljs-keyword">ref</span> a @ <span class="hljs-literal">Some</span>(_), .. }) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{:?}"</span>, a),
    _ =&gt; {}
}
</div></code></pre>
<p>è¿™ä¼šè¾“å‡º <code>Some(&quot;Steve&quot;)</code>ï¼Œå› ä¸ºæˆ‘ä»¬æŠŠPersoné‡Œé¢çš„<code>name</code>ç»‘å®šåˆ°<code>a</code>ã€‚</p>
<p>å¦‚æœä½ åœ¨ä½¿ç”¨<code>|</code>çš„åŒæ—¶ä¹Ÿä½¿ç”¨äº†<code>@</code>ï¼Œä½ éœ€è¦ç¡®ä¿åå­—åœ¨æ¯ä¸ªæ¨¡å¼çš„æ¯ä¸€éƒ¨åˆ†éƒ½ç»‘å®šåå­—ï¼š</p>
<pre class="hljs"><code><div><span class="hljs-keyword">let</span> x = <span class="hljs-number">5</span>;

<span class="hljs-keyword">match</span> x {
    e @ <span class="hljs-number">1</span> ... <span class="hljs-number">5</span> | e @ <span class="hljs-number">8</span> ... <span class="hljs-number">10</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"got a range element {}"</span>, e),
    _ =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"anything"</span>),
}
</div></code></pre>
<h2 id="%E5%AE%88%E5%8D%AB%EF%BC%88guards%EF%BC%89">å®ˆå«ï¼ˆGuardsï¼‰</h2>
<p>ä½ å¯ä»¥ç”¨<code>if</code>æ¥å¼•å…¥<em>åŒ¹é…å®ˆå«</em>ï¼ˆ<em>match guards</em>ï¼‰ï¼š</p>
<pre class="hljs"><code><div><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">OptionalInt</span></span> {
    Value(<span class="hljs-built_in">i32</span>),
    Missing,
}

<span class="hljs-keyword">let</span> x = OptionalInt::Value(<span class="hljs-number">5</span>);

<span class="hljs-keyword">match</span> x {
    OptionalInt::Value(i) <span class="hljs-keyword">if</span> i &gt; <span class="hljs-number">5</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Got an int bigger than five!"</span>),
    OptionalInt::Value(..) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Got an int!"</span>),
    OptionalInt::Missing =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"No such luck."</span>),
}
</div></code></pre>
<p>è¿™ä¼šè¾“å‡º<code>Got an int!</code>ã€‚</p>
<p>å¦‚æœä½ åœ¨<code>if</code>ä¸­ä½¿ç”¨å¤šé‡æ¨¡å¼ï¼Œ<code>if</code>æ¡ä»¶å°†é€‚ç”¨äºæ‰€æœ‰æ¨¡å¼ï¼š</p>
<pre class="hljs"><code><div><span class="hljs-keyword">let</span> x = <span class="hljs-number">4</span>;
<span class="hljs-keyword">let</span> y = <span class="hljs-literal">false</span>;

<span class="hljs-keyword">match</span> x {
    <span class="hljs-number">4</span> | <span class="hljs-number">5</span> <span class="hljs-keyword">if</span> y =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"yes"</span>),
    _ =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"no"</span>),
}
</div></code></pre>
<p>è¿™ä¼šæ‰“å°<code>no</code>ï¼Œå› ä¸º<code>if</code>é€‚ç”¨äºæ•´ä¸ª<code>4 | 5</code>ï¼Œè€Œä¸ä»…ä»…æ˜¯<code>5</code>ï¼Œæ¢å¥è¯è¯´ï¼Œ<code>if</code>è¯­å¥çš„ä¼˜å…ˆçº§æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="language-text">(4 | 5) if y => ...
</code></pre>
<p>è€Œä¸æ˜¯è¿™æ ·ï¼š</p>
<pre><code class="language-text">4 | (5 if y) => ...
</code></pre>
<h2 id="%E6%B7%B7%E5%90%88%E4%B8%8E%E5%8C%B9%E9%85%8D%EF%BC%88mix-and-match%EF%BC%89">æ··åˆä¸åŒ¹é…ï¼ˆMix and Matchï¼‰</h2>
<p>(å£å“¨)ï¼æ ¹æ®ä½ çš„éœ€æ±‚ï¼Œä½ å¯ä»¥å¯¹ä¸Šé¢çš„å¤šç§åŒ¹é…æ–¹æ³•è¿›è¡Œç»„åˆï¼š</p>
<pre class="hljs"><code><div><span class="hljs-keyword">match</span> x {
    Foo { x: <span class="hljs-literal">Some</span>(<span class="hljs-keyword">ref</span> name), y: <span class="hljs-literal">None</span> } =&gt; ...
}
</div></code></pre>
<p>æ¨¡å¼ååˆ†å¼ºå¤§ã€‚å¥½å¥½ä½¿ç”¨å®ƒä»¬ã€‚</p>
<h1 id="if-let">if let</h1>
<p><code>if let</code>å…è®¸ä½ åˆå¹¶<code>if</code>å’Œ<code>let</code>æ¥å‡å°‘ç‰¹å®šç±»å‹æ¨¡å¼åŒ¹é…çš„å¼€é”€ã€‚</p>
<p>ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬å‡è®¾æˆ‘ä»¬æœ‰ä¸€äº›<code>Option&lt;T&gt;</code>ã€‚æˆ‘ä»¬æƒ³è®©å®ƒæ˜¯<code>Some&lt;T&gt;</code>æ—¶åœ¨å…¶ä¸Šè°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œè€Œå®ƒæ˜¯<code>None</code>æ—¶ä»€ä¹ˆä¹Ÿä¸åšã€‚è¿™çœ‹èµ·æ¥åƒï¼š</p>
<pre class="hljs"><code><div><span class="hljs-keyword">let</span> option = <span class="hljs-literal">Some</span>(<span class="hljs-number">5</span>);
<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">foo</span></span>(x: <span class="hljs-built_in">i32</span>) { }
<span class="hljs-keyword">match</span> option {
    <span class="hljs-literal">Some</span>(x) =&gt; { foo(x) },
    <span class="hljs-literal">None</span> =&gt; {},
}
</div></code></pre>
<p>æˆ‘ä»¬å¹¶ä¸ä¸€å®šè¦åœ¨è¿™ä½¿ç”¨<code>match</code>ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>if</code>ï¼š</p>
<pre class="hljs"><code><div># <span class="hljs-keyword">let</span> option = <span class="hljs-literal">Some</span>(<span class="hljs-number">5</span>);
# <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">foo</span></span>(x: <span class="hljs-built_in">i32</span>) { }
<span class="hljs-keyword">if</span> option.is_some() {
    <span class="hljs-keyword">let</span> x = option.unwrap();
    foo(x);
}
</div></code></pre>
<p>è¿™ä¸¤ç§é€‰é¡¹éƒ½ä¸æ˜¯ç‰¹åˆ«å¸å¼•äººã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>if let</code>æ¥ä¼˜é›…åœ°å®Œæˆç›¸åŒçš„åŠŸèƒ½ï¼š</p>
<pre class="hljs"><code><div># <span class="hljs-keyword">let</span> option = <span class="hljs-literal">Some</span>(<span class="hljs-number">5</span>);
# <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">foo</span></span>(x: <span class="hljs-built_in">i32</span>) { }
<span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-literal">Some</span>(x) = option {
    foo(x);
}
</div></code></pre>
<p>å¦‚æœä¸€ä¸ª[æ¨¡å¼](Patterns <a href="http://xn--w0t69v.md">æ¨¡å¼.md</a>)åŒ¹é…æˆåŠŸï¼Œå®ƒç»‘å®šä»»ä½•å€¼çš„åˆé€‚çš„éƒ¨åˆ†åˆ°æ¨¡å¼çš„æ ‡è¯†ç¬¦ä¸­ï¼Œå¹¶è®¡ç®—è¿™ä¸ªè¡¨è¾¾å¼ã€‚å¦‚æœæ¨¡å¼ä¸åŒ¹é…ï¼Œå•¥ä¹Ÿä¸ä¼šå‘ç”Ÿã€‚</p>
<p>å¦‚æœä½ æƒ³åœ¨æ¨¡å¼ä¸åŒ¹é…æ—¶åšç‚¹å…¶ä»–çš„ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>else</code>ï¼š</p>
<pre class="hljs"><code><div># <span class="hljs-keyword">let</span> option = <span class="hljs-literal">Some</span>(<span class="hljs-number">5</span>);
# <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">foo</span></span>(x: <span class="hljs-built_in">i32</span>) { }
# <span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">bar</span></span>() { }
<span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-literal">Some</span>(x) = option {
    foo(x);
} <span class="hljs-keyword">else</span> {
    bar();
}
</div></code></pre>
<h2 id="while-let"><code>while let</code></h2>
<p>ç±»ä¼¼çš„ï¼Œå½“ä½ æƒ³ä¸€ç›´å¾ªç¯ï¼Œç›´åˆ°ä¸€ä¸ªå€¼åŒ¹é…åˆ°ç‰¹å®šçš„æ¨¡å¼çš„æ—¶å€™ï¼Œä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨<code>while let</code>ã€‚ä½¿ç”¨<code>while let</code>å¯ä»¥æŠŠç±»ä¼¼è¿™æ ·çš„ä»£ç ï¼š</p>
<pre class="hljs"><code><div><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> v = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">11</span>];
<span class="hljs-keyword">loop</span> {
    <span class="hljs-keyword">match</span> v.pop() {
        <span class="hljs-literal">Some</span>(x) =&gt;  <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, x),
        <span class="hljs-literal">None</span> =&gt; <span class="hljs-keyword">break</span>,
    }
}
</div></code></pre>
<p>å˜æˆè¿™æ ·çš„ä»£ç ï¼š</p>
<pre class="hljs"><code><div><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> v = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">11</span>];
<span class="hljs-keyword">while</span> <span class="hljs-keyword">let</span> <span class="hljs-literal">Some</span>(x) = v.pop() {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, x);
}
</div></code></pre>
              </div>
          </div>
        </div>
      </main>
  </div>
</template>

<script>
/* eslint-disable */
import Wikiside from '../../../../../../components/wikiside/Wikiside'
export default {
  name: 'pattern',
  components: {
    "wikiside": Wikiside
  }
}
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>
a{
    color: #0541af;
}
#center {
  padding: 1rem;
  background-color: #FFFFFF;
}
main img {
        margin: 1rem auto;
        padding: 0.1rem;
        width: 100%;
}
main pre {
    display: block;
    padding: 8px;
    margin: 5px 0;
    font-size: 13.3px;
    line-height: 1.5;
    color: var(--purple);
    word-break: break-all;
    word-wrap: break-word;
    background-color: #f5f5f5;
    border: 1px solid rgb(246, 226, 252);
    text-shadow: none;
}

main code {
    padding: 2px 4px;
    font-size: 90%;
    background-color: #f5f5f5;
    border-radius: 4px;
    border: 1px solid #ccc;
    color: var(--purple);
    text-shadow: none;
}

main pre code {
    padding: 0;
    font-size: inherit;
    color: inherit;
    white-space: pre-wrap;
    background-color: transparent;
    border-radius: 0;
    border: 0;
}
@media only screen and (max-width: 600px) {
    main{
        margin: 1vh auto;
        width: 97%;
    }
}
@media only screen and (min-width: 600px) and (max-width: 850px) {
    main{
        margin: 0 auto;
        width: 80%;
        padding-top: 77px;
    }
    #container {
      display: flex;
      flex-flow: row;
    }
    #container #center {
        width: 70%;
        margin-left: 1vw;
    }
    #container #wikiside {
        flex: 1;
        background-color: #f1ebeb;
    }
}
@media only screen and (min-width: 850px) {
    main {
        margin: 0 auto;
        width: 75%;
        padding-top: 77px;
    }
    #container {
      display: flex;
      flex-flow: row;
    }
    #container #center {
        width: 80%;
        margin-left: 1vw;
    }
    #container #wikiside {
        flex: 1;
        background-color: #f1ebeb;
    }
}
</style>